{
  "params": "$path:params.json",
  "Radial build": {
    "run_mode": "run",
    "read_dir": "config/",
    "run_dir": "config/",
    "plot": false
  },
  "Fixed boundary equilibrium": {
    "run_mode": "read",
    "file_path": "config/fixed_boundary_eqdsk.json",
    "param_class": "JohnerLCFS",
    "shape_config": {
      "f_delta_l": 1.25,
      "f_kappa_l": 1.15,
      "phi_l_neg": -130.0,
      "phi_l_pos": 30.0,
      "phi_u_neg": 0.0,
      "phi_u_pos": 0.0
    },
    "plasmod_settings": {
      "i_impmodel": "PED_FIXED",
      "i_modeltype": "GYROBOHM_2",
      "i_equiltype": "q95_sawtooth",
      "i_pedestal": "SAARELMA",
      "isawt": "FULLY_RELAXED",
      "nx": 41,
      "nxt": 21,
      "ntglf": 11
    },
    "fixed_equilibrium_settings": {
      "p_order": 2,
      "max_iter": 30,
      "iter_err_max": 1e-4,
      "relaxation": 0.05
    },
    "transport_eq_settings": {
      "lcar_mesh": 0.3,
      "max_iter": 15,
      "iter_err_max": 1e-1,
      "relaxation": 0.0,
      "plot": false
    }
  },
  "Dummy fixed boundary equilibrium": {
    "run_mode": "run",
    "param_class": "bluemira.equilibria.shapes::KuiroukidisLCFS",
    "shape_config": {
      "f_delta_l": 1.25,
      "f_kappa_l": 1.15
    },
    "settings": {
      "n_points": 200,
      "li_rel_tol": 0.01,
      "li_min_iter": 2
    }
  },
  "Free boundary equilibrium": {
    "run_mode": "run",
    "plot": true,
    "fixed_eq_file_path": "config/fixed_boundary_eqdsk.json",
    "file_path": "config/equilibrium_eqdsk.json",
    "settings": {
      "iter_err_max": 1e-3,
      "max_iter": 50,
      "relaxation": 0.15,
      "coil_discretisation": 0.3,
      "gamma": 1e-7
    },
    "grid_settings": {
      "nx": 127,
      "nz": 127,
      "grid_scale_x": 1.6,
      "grid_scale_z": 1.7
    }
  },
  "IVC": {
    "Wall silhouette": {
      "param_class": "eudemo.ivc.wall_silhouette_parameterisation::WallPolySpline",
      "variables_map": {
        "x1": {
          "value": "r_fw_ib_in"
        },
        "x2": {
          "value": "r_fw_ob_in"
        }
      },
      "run_mode": "run",
      "name": "First Wall",
      "file_path": "config/FirstWallDesign.json",
      "problem_class": "bluemira.geometry.optimisation::MinimiseLengthGOP",
      "problem_settings": {
        "n_koz_points": 100
      },
      "optimisation_settings": {
        "algorithm_name": "SLSQP",
        "conditions": {
          "max_eval": 200,
          "ftol_rel": 1e-6
        }
      }
    },
    "Divertor silhouette": {}
  },
  "TF coils": {
    "run_mode": "run",
    "file_path": "config/TFCoilDesign.json",
    "plot": true,
    "param_class": "TripleArc",
    "variables_map": {},
    "problem_class": "bluemira.builders.tf_coils::RippleConstrainedLengthGOP",
    "problem_settings": {
      "n_rip_points": 10,
      "n_koz_points": 50,
      "nx": 1,
      "ny": 1
    },
    "optimisation_settings": {
      "algorithm_name": "SLSQP",
      "conditions": {
        "max_eval": 200,
        "ftol_rel": 1e-6
      }
    }
  },
  "Lower Port": {
    "params": {
      "lp_duct_tf_offset": {
        "value": 3,
        "unit": "m",
        "source": "Input",
        "long_name": "Lower duct TF Coil offset."
      },
      "lp_duct_div_pad_ob": {
        "value": 0.3,
        "unit": "m",
        "source": "Input",
        "long_name": "Padding applied towards the outboard from the divertor."
      },
      "lp_duct_div_pad_ib": {
        "value": 0.1,
        "unit": "m",
        "source": "Input",
        "long_name": "Padding applied towards the inboard from the divertor."
      },
      "lp_height": {
        "value": 3,
        "unit": "m",
        "source": "Input",
        "long_name": "Height of the lower port"
      },
      "lp_width": {
        "value": 3,
        "unit": "m",
        "source": "Input",
        "long_name": "Width of the lower port"
      },
      "lp_duct_angle": {
        "value": -30,
        "unit": "degrees",
        "source": "Input",
        "long_name": "Angle of the lower port duct to the divertor."
      },
      "tf_coil_thickness": {
        "value": 0.65,
        "unit": "m",
        "source": "Input",
        "long_name": "TF Coil thickness (temporary)."
      },
      "lp_duct_wall_tk": {
        "value": 0.02,
        "unit": "m",
        "source": "Input",
        "long_name": "Lower port duct wall thickness."
      }
    }
  },
  "PF coils": {
    "run_mode": "run",
    "file_path": "config/PFCoilDesign.json",
    "verbose": false,
    "plot": true,
    "grid_settings": {
      "nx": 127,
      "nz": 127,
      "grid_scale_x": 2.0,
      "grid_scale_z": 2.0
    },
    "breakdown_settings": {
      "param_class": "bluemira.equilibria.opt_problems::OutboardBreakdownZoneStrategy",
      "problem_class": "bluemira.equilibria.opt_problems::BreakdownCOP",
      "B_stray_con_tol": 1e-6,
      "n_B_stray_points": 10,
      "optimisation_settings": {
        "algorithm_name": "COBYLA",
        "conditions": {
          "max_eval": 5000,
          "ftol_rel": 1e-10
        }
      }
    },
    "equilibrium_settings": {
      "problem_class": "bluemira.equilibria.opt_problems::TikhonovCurrentCOP",
      "convergence_class": "bluemira.equilibria.solve::DudsonConvergence",
      "conv_limit": 1e-4,
      "gamma": 1e-12,
      "relaxation": 0.2,
      "peak_PF_current_factor": 1.5,
      "optimisation_settings": {
        "algorithm_name": "SLSQP",
        "conditions": {
          "max_eval": 5000,
          "ftol_rel": 1e-6
        }
      }
    },
    "position_settings": {
      "optimisation_settings": {
        "algorithm_name": "COBYLA",
        "conditions": {
          "max_eval": 50,
          "ftol_rel": 1e-10
        }
      }
    }
  }
}
